if (MINGW)
set(CMAKE_PREFIX_PATH "C:\\gstreamer\\1.0\\mingw_x86")
elseif(MSVC)
set(CMAKE_PREFIX_PATH "C:\\gstreamer\\1.0\\msvc_x86_64")
endif()

find_package(PkgConfig REQUIRED)

pkg_check_modules(GLIB REQUIRED glib-2.0)
pkg_check_modules(GIO REQUIRED gio-2.0)
pkg_check_modules(GOBJECT REQUIRED gobject-2.0)
pkg_check_modules(SDP REQUIRED gstreamer-sdp-1.0)
pkg_check_modules(GST REQUIRED gstreamer-1.0)
pkg_check_modules(JSON_GLIB REQUIRED json-glib-1.0)
pkg_check_modules(LIBSOUP REQUIRED libsoup-2.4)
pkg_check_modules(WEBRTC REQUIRED gstreamer-webrtc-1.0)
pkg_check_modules(CONTROLLER REQUIRED gstreamer-controller-1.0)




file(GLOB SOURCE_LIST ${CMAKE_SOURCE_DIR}/source/*.c)

add_executable(${PROJECT_NAME} ${SOURCE_LIST})




target_include_directories(${PROJECT_NAME} 
PUBLIC
    ${CMAKE_SOURCE_DIR}/include

    
    ${LIBSOUP_INCLUDE_DIRS}
    ${GLIB_INCLUDE_DIRS} 
    ${GIO_INCLUDE_DIRS} 
    ${GOBJECT_INCLUDE_DIRS}
    ${SDP_INCLUDE_DIRS}
    ${GST_INCLUDE_DIRS}
    ${JSON_GLIB_INCLUDE_DIRS}
    ${WEBRTC_INCLUDE_DIRS}
    ${CONTROLLER_INCLUDE_DIRS})

target_compile_options(${PROJECT_NAME} PUBLIC ${GLIB_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${GIO_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${GOBJECT_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${SDP_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${GST_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${JSON_GLIB_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${WEBRTC_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${CONTROLLER_CFLAGS})

target_link_libraries(${PROJECT_NAME} PUBLIC 
${GLIB_LIBRARY}  
${GIO_LIBRARY} 
${GOBJECT_LIBRARY} 
${SDP_LIBRARY}
${GST_LIBRARY}
${JSON_GLIB_LIBRARY}
${LIBSOUP_LIBRARY}
${WEBRTC_LIBRARY}
${CONTROLLER_LIBRARY}
)

target_link_libraries(${PROJECT_NAME} PUBLIC 
${GLIB_LINK_LIBRARY} 
${GIO_LINK_LIBRARY} 
${GOBJECT_LINK_LIBRARY}
${LIBSOUP_LINK_LIBRARY}
${SDP_LINK_LIBRARY}
${GST_LINK_LIBRARY}
${JSON_GLIB_LINK_LIBRARY}
${WEBRTC_LINK_LIBRARY}
${CONTROLLER_LINK_LIBRARY})