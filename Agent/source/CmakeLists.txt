
find_package(PkgConfig REQUIRED)

pkg_check_modules(GLIB REQUIRED glib-2.0)
pkg_check_modules(GIO REQUIRED gio-2.0)
pkg_check_modules(GOBJECT REQUIRED gobject-2.0)
pkg_check_modules(JSON_GLIB REQUIRED json-glib-1.0)
pkg_check_modules(LIBSOUP REQUIRED libsoup-2.4)


file(GLOB SOURCE ${CMAKE_SOURCE_DIR}/source/*.c ${CMAKE_SOURCE_DIR}/source/agent-state/*.c)



add_executable(${PROJECT_NAME} ${SOURCE})





target_include_directories(${PROJECT_NAME} 
PUBLIC
    ${CMAKE_SOURCE_DIR}/include
    ${CMAKE_SOURCE_DIR}/include/agent-state
	

    
    ${LIBSOUP_INCLUDE_DIRS}
    ${GLIB_INCLUDE_DIRS} 
    ${GIO_INCLUDE_DIRS} 
    ${GOBJECT_INCLUDE_DIRS}
    ${JSON_GLIB_INCLUDE_DIRS}
    ${CONTROLLER_INCLUDE_DIRS})

target_compile_options(${PROJECT_NAME} PUBLIC ${GLIB_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${GIO_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${GOBJECT_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${JSON_GLIB_CFLAGS})
target_compile_options(${PROJECT_NAME} PUBLIC ${CONTROLLER_CFLAGS})


target_link_libraries(${PROJECT_NAME} 
PUBLIC 
    ${GLIB_LIBRARY}  
    ${GIO_LIBRARY} 
    ${GOBJECT_LIBRARY} 
    ${JSON_GLIB_LIBRARY}
    ${LIBSOUP_LIBRARY}
    ${CONTROLLER_LIBRARY}
)

target_link_libraries(${PROJECT_NAME} 
PUBLIC 
    ${GLIB_LINK_LIBRARY}    
    ${GIO_LINK_LIBRARY} 
    ${GOBJECT_LINK_LIBRARY}
    ${LIBSOUP_LINK_LIBRARY}
    ${JSON_GLIB_LINK_LIBRARY}
    ${CONTROLLER_LINK_LIBRARY}
    )
